### 在你目前的工作场景中，哪个业务适合使用 rabbitmq？ 引入 rabbitmq 主要解决什么问题?（非相关工作可以以设计淘宝购物和结账功能为例来描述）

订单系统和其他支撑系统的信息交互。

-   当顾客在网店下单，订单系统需要和以下几个系统进行信息交互

    -   1：通知仓库需要发货
    -   2：把单号发给物流商，并通知其来取货
    -   3: 通知系统，需要把订单进度给通知系统，以供顾客查看。

主要解决了系统之前的耦合，强依赖，对于某个事务需要回滚的时候，更容易在各个服务之间进行信息交互。即使某个服务下线了，使用 rabbitmq 或者其他消息系统依然可以对下线前最近的情况进行获取。

### 如何避免消息重复投递或重复消费

-   消费者在消息过期前对消息进行 ACK

### 交换机 fanout、direct、topic 有什么区别？

-   fanout: 生产者生产 exchange，并且通过对 exchange 和不同的消费者的队列进行绑定，传递所有信息到不同的消费者队列上。
-   direct exchange: 对消息进行标示，需要对消息和队列的路由键进行匹配，匹配上才会转发。
-   topic exchange: 类似 direct,到那但是可以对键进行模糊匹配

### 架构中引入消息队列是否利大于弊？你认为消息队列有哪些缺点？

是的，利大于弊，降低了架构对复杂度，对服务之间的解耦合很有意义。缺点是有有可能会有重复数据，增加了维护节点，提高了成本，数据会有延迟的可能。
